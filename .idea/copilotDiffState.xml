<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/sweetapps/pocketchord/data/supabase/model/Announcement.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/sweetapps/pocketchord/data/supabase/model/Announcement.kt" />
              <option name="originalContent" value="package com.sweetapps.pocketchord.data.supabase.model&#10;&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;&#10;/**&#10; * 공지사항 모델&#10; *&#10; * Supabase 테이블 구조 (announcements):&#10; * ```sql&#10; * CREATE TABLE public.announcements (&#10; *     id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,&#10; *     created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),&#10; *     app_id TEXT NOT NULL,&#10; *     title TEXT NOT NULL,&#10; *     content TEXT NOT NULL,&#10; *     is_active BOOLEAN NOT NULL DEFAULT TRUE,&#10; *     CONSTRAINT announcements_pkey PRIMARY KEY (id)&#10; * )&#10; * ```&#10; *&#10; * 용도:&#10; * - 앱 내 팝업 공지사항&#10; * - 배너 알림&#10; * - 뉴스 피드&#10; * - 이벤트 안내&#10; *&#10; * 사용 예시:&#10; * ```kotlin&#10; * val announcements = supabase.from(&quot;announcements&quot;)&#10; *     .select()&#10; *     .eq(&quot;app_id&quot;, &quot;pocketchord&quot;)&#10; *     .eq(&quot;is_active&quot;, true)&#10; *     .order(&quot;created_at&quot;, descending = true)&#10; *     .decodeList&lt;Announcement&gt;()&#10; * ```&#10; */&#10;@Serializable&#10;data class Announcement(&#10;    /**&#10;     * 공지사항 ID (자동 생성)&#10;     */&#10;    @SerialName(&quot;id&quot;)&#10;    val id: Long? = null,&#10;&#10;    /**&#10;     * 생성 시간 (ISO 8601 형식)&#10;     * 예: &quot;2025-11-05T10:30:00Z&quot;&#10;     */&#10;    @SerialName(&quot;created_at&quot;)&#10;    val createdAt: String? = null,&#10;&#10;    /**&#10;     * 앱 식별자&#10;     * 하나의 Supabase 프로젝트에서 여러 앱을 관리할 때 사용&#10;     * 기본값: &quot;com.sweetapps.pocketchord&quot;&#10;     */&#10;    @SerialName(&quot;app_id&quot;)&#10;    val appId: String = &quot;com.sweetapps.pocketchord&quot;,&#10;&#10;    /**&#10;     * 공지사항 제목&#10;     * 예: &quot;새로운 기능 업데이트!&quot;, &quot;12월 이벤트 안내&quot;&#10;     */&#10;    @SerialName(&quot;title&quot;)&#10;    val title: String,&#10;&#10;    /**&#10;     * 공지사항 내용&#10;     * Markdown 형식 지원 가능&#10;     */&#10;    @SerialName(&quot;content&quot;)&#10;    val content: String,&#10;&#10;    /**&#10;     * 활성화 여부&#10;     * - true: 앱에 표시&#10;     * - false: 숨김 (관리자만 확인 가능)&#10;     */&#10;    @SerialName(&quot;is_active&quot;)&#10;    val isActive: Boolean = true&#10;)&#10;&#10;" />
              <option name="updatedContent" value="package com.sweetapps.pocketchord.data.supabase.model&#13;&#10;&#13;&#10;import kotlinx.serialization.SerialName&#13;&#10;import kotlinx.serialization.Serializable&#13;&#10;&#13;&#10;/**&#13;&#10; * 공지사항 모델&#13;&#10; *&#13;&#10; * Supabase 테이블 구조 (announcements):&#13;&#10; * ```sql&#13;&#10; * CREATE TABLE public.announcements (&#13;&#10; *     id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,&#13;&#10; *     created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),&#13;&#10; *     app_id TEXT NOT NULL,&#13;&#10; *     title TEXT NOT NULL,&#13;&#10; *     content TEXT NOT NULL,&#13;&#10; *     is_active BOOLEAN NOT NULL DEFAULT TRUE,&#13;&#10; *     CONSTRAINT announcements_pkey PRIMARY KEY (id)&#13;&#10; * )&#13;&#10; * ```&#13;&#10; *&#13;&#10; * 용도:&#13;&#10; * - 앱 내 팝업 공지사항&#13;&#10; * - 배너 알림&#13;&#10; * - 뉴스 피드&#13;&#10; * - 이벤트 안내&#13;&#10; *&#13;&#10; * 사용 예시:&#13;&#10; * ```kotlin&#13;&#10; * val announcements = supabase.from(&quot;announcements&quot;)&#13;&#10; *     .select()&#13;&#10; *     .eq(&quot;app_id&quot;, &quot;pocketchord&quot;)&#13;&#10; *     .eq(&quot;is_active&quot;, true)&#13;&#10; *     .order(&quot;created_at&quot;, descending = true)&#13;&#10; *     .decodeList&lt;Announcement&gt;()&#13;&#10; * ```&#13;&#10; */&#13;&#10;@Serializable&#13;&#10;data class Announcement(&#13;&#10;    /**&#13;&#10;     * 공지사항 ID (자동 생성)&#13;&#10;     */&#13;&#10;    @SerialName(&quot;id&quot;)&#13;&#10;    val id: Long? = null,&#13;&#10;&#13;&#10;    /**&#13;&#10;     * 생성 시간 (ISO 8601 형식)&#13;&#10;     * 예: &quot;2025-11-05T10:30:00Z&quot;&#13;&#10;     */&#13;&#10;    @SerialName(&quot;created_at&quot;)&#13;&#10;    val createdAt: String? = null,&#13;&#10;&#13;&#10;    /**&#10;     * 앱 식별자&#10;     * 하나의 Supabase 프로젝트에서 여러 앱을 관리할 때 사용&#10;     * 기본값: &quot;com.sweetapps.pocketchord&quot;&#10;     */&#10;    @SerialName(&quot;app_id&quot;)&#10;    val appId: String = &quot;com.sweetapps.pocketchord&quot;,&#13;&#10;&#13;&#10;    /**&#13;&#10;     * 공지사항 제목&#13;&#10;     * 예: &quot;새로운 기능 업데이트!&quot;, &quot;12월 이벤트 안내&quot;&#13;&#10;     */&#13;&#10;    @SerialName(&quot;title&quot;)&#13;&#10;    val title: String,&#13;&#10;&#13;&#10;    /**&#13;&#10;     * 공지사항 내용&#13;&#10;     * Markdown 형식 지원 가능&#13;&#10;     */&#13;&#10;    @SerialName(&quot;content&quot;)&#13;&#10;    val content: String,&#13;&#10;&#13;&#10;    /**&#13;&#10;     * 활성화 여부&#13;&#10;     * - true: 앱에 표시&#13;&#10;     * - false: 숨김 (관리자만 확인 가능)&#13;&#10;     */&#13;&#10;    @SerialName(&quot;is_active&quot;)&#13;&#10;    val isActive: Boolean = true&#13;&#10;)&#13;&#10;&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/sweetapps/pocketchord/data/supabase/repository/AnnouncementRepository.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/sweetapps/pocketchord/data/supabase/repository/AnnouncementRepository.kt" />
              <option name="originalContent" value="package com.sweetapps.pocketchord.data.supabase.repository&#10;&#10;import com.sweetapps.pocketchord.data.supabase.model.Announcement&#10;import io.github.jan.supabase.SupabaseClient&#10;import io.github.jan.supabase.postgrest.from&#10;&#10;/**&#10; * 공지사항 Repository&#10; *&#10; * Supabase의 announcements 테이블과 통신하여&#10; * 공지사항 데이터를 조회하는 역할을 담당합니다.&#10; *&#10; * 사용 예시:&#10; * ```kotlin&#10; * val repository = AnnouncementRepository(supabase, &quot;pocketchord&quot;)&#10; * val announcements = repository.getAnnouncements()&#10; * ```&#10; */&#10;class AnnouncementRepository(&#10;    private val client: SupabaseClient,&#10;    private val appId: String = &quot;com.sweetapps.pocketchord&quot;&#10;) {&#10;    /**&#10;     * 모든 활성 공지사항 조회&#10;     *&#10;     * @return 최신순으로 정렬된 공지사항 리스트&#10;     */&#10;    suspend fun getAnnouncements(): Result&lt;List&lt;Announcement&gt;&gt; = runCatching {&#10;        client.from(&quot;announcements&quot;)&#10;            .select()&#10;            .decodeList&lt;Announcement&gt;()&#10;            .filter { it.appId == appId &amp;&amp; it.isActive }&#10;            .sortedByDescending { it.createdAt }&#10;    }&#10;&#10;    /**&#10;     * 최신 공지사항 1개 조회&#10;     *&#10;     * @return 가장 최근 공지사항, 없으면 null&#10;     */&#10;    suspend fun getLatestAnnouncement(): Result&lt;Announcement?&gt; = runCatching {&#10;        client.from(&quot;announcements&quot;)&#10;            .select()&#10;            .decodeList&lt;Announcement&gt;()&#10;            .filter { it.appId == appId &amp;&amp; it.isActive }&#10;            .maxByOrNull { it.createdAt ?: &quot;&quot; }&#10;    }&#10;&#10;    /**&#10;     * 특정 ID의 공지사항 조회&#10;     *&#10;     * @param id 공지사항 ID&#10;     * @return 해당 공지사항, 없으면 null&#10;     */&#10;    suspend fun getAnnouncementById(id: Long): Result&lt;Announcement?&gt; = runCatching {&#10;        client.from(&quot;announcements&quot;)&#10;            .select()&#10;            .decodeList&lt;Announcement&gt;()&#10;            .find { it.id == id &amp;&amp; it.appId == appId }&#10;    }&#10;&#10;    /**&#10;     * 특정 개수만큼 공지사항 조회&#10;     *&#10;     * @param limit 조회할 개수&#10;     * @return 최신순으로 정렬된 공지사항 리스트&#10;     */&#10;    suspend fun getRecentAnnouncements(limit: Int = 5): Result&lt;List&lt;Announcement&gt;&gt; = runCatching {&#10;        client.from(&quot;announcements&quot;)&#10;            .select()&#10;            .decodeList&lt;Announcement&gt;()&#10;            .filter { it.appId == appId &amp;&amp; it.isActive }&#10;            .sortedByDescending { it.createdAt }&#10;            .take(limit)&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.sweetapps.pocketchord.data.supabase.repository&#10;&#10;import com.sweetapps.pocketchord.data.supabase.model.Announcement&#10;import io.github.jan.supabase.SupabaseClient&#10;import io.github.jan.supabase.postgrest.from&#10;&#10;/**&#10; * 공지사항 Repository&#10; *&#10; * Supabase의 announcements 테이블과 통신하여&#10; * 공지사항 데이터를 조회하는 역할을 담당합니다.&#10; *&#10; * 사용 예시:&#10; * ```kotlin&#10; * val repository = AnnouncementRepository(supabase, &quot;pocketchord&quot;)&#10; * val announcements = repository.getAnnouncements()&#10; * ```&#10; */&#10;class AnnouncementRepository(&#10;    private val client: SupabaseClient,&#10;    private val appId: String = &quot;com.sweetapps.pocketchord&quot;&#10;) {&#10;    /**&#10;     * 모든 활성 공지사항 조회&#10;     *&#10;     * @return 최신순으로 정렬된 공지사항 리스트&#10;     */&#10;    suspend fun getAnnouncements(): Result&lt;List&lt;Announcement&gt;&gt; = runCatching {&#10;        client.from(&quot;announcements&quot;)&#10;            .select()&#10;            .decodeList&lt;Announcement&gt;()&#10;            .filter { it.appId == appId &amp;&amp; it.isActive }&#10;            .sortedByDescending { it.createdAt }&#10;    }&#10;&#10;    /**&#10;     * 최신 공지사항 1개 조회&#10;     *&#10;     * @return 가장 최근 공지사항, 없으면 null&#10;     */&#10;    suspend fun getLatestAnnouncement(): Result&lt;Announcement?&gt; = runCatching {&#10;        client.from(&quot;announcements&quot;)&#10;            .select()&#10;            .decodeList&lt;Announcement&gt;()&#10;            .filter { it.appId == appId &amp;&amp; it.isActive }&#10;            .maxByOrNull { it.createdAt ?: &quot;&quot; }&#10;    }&#10;&#10;    /**&#10;     * 특정 ID의 공지사항 조회&#10;     *&#10;     * @param id 공지사항 ID&#10;     * @return 해당 공지사항, 없으면 null&#10;     */&#10;    suspend fun getAnnouncementById(id: Long): Result&lt;Announcement?&gt; = runCatching {&#10;        client.from(&quot;announcements&quot;)&#10;            .select()&#10;            .decodeList&lt;Announcement&gt;()&#10;            .find { it.id == id &amp;&amp; it.appId == appId }&#10;    }&#10;&#10;    /**&#10;     * 특정 개수만큼 공지사항 조회&#10;     *&#10;     * @param limit 조회할 개수&#10;     * @return 최신순으로 정렬된 공지사항 리스트&#10;     */&#10;    suspend fun getRecentAnnouncements(limit: Int = 5): Result&lt;List&lt;Announcement&gt;&gt; = runCatching {&#10;        client.from(&quot;announcements&quot;)&#10;            .select()&#10;            .decodeList&lt;Announcement&gt;()&#10;            .filter { it.appId == appId &amp;&amp; it.isActive }&#10;            .sortedByDescending { it.createdAt }&#10;            .take(limit)&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>